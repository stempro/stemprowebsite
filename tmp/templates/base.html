<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="StemPro Academy is a nonprofit organization offering AI, programming, and STEM education for students.">
    <meta name="keywords" content="STEM education, AI programs, programming courses, STEM nonprofit, college preparation, research mentorship">
    <meta property="og:title" content="StemPro Academy | Empowering the Next Generation of Innovators">
    <meta property="og:description" content="Join StemPro Academy for top-notch STEM education programs in AI, programming, and more.">
    <title>{% block title %}StemPro Academy{% endblock %}</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
    <script src="https://accounts.google.com/gsi/client" async defer></script>
</head>
<body>
    <header class="navbar">
        <div class="logo">
            <img src="{{ url_for('static', filename='images/3.png') }}" alt="StemPro Academy Logo">
            <span class="logo-text">StemPro Academy</span>
        </div>
        <!-- Hamburger icon for mobile -->
        <div class="hamburger" onclick="toggleMenu()">
            &#9776; <!-- Unicode character for the hamburger icon -->
        </div>
        <ul class="nav-menu">
            <li><a href="{{ url_for('courses') }}">Courses</a></li>
            <li><a href="{{ url_for('programs') }}">Programs</a></li>
            <li><a href="{{ url_for('success') }}">Success Stories</a></li>
            <li><a href="{{ url_for('about') }}">About Us</a></li>
        </ul>
        <!-- <a href="{{ url_for('schedule') }}" class="login-button">Schedule</a> -->
        <!-- Conditional Login/Enroll or Logged In display -->
        <div class="auth-links">
            {% if not user_logged_in %}
                {% if request.endpoint != 'enroll' and request.endpoint != 'register' %}
                    <a href="{{ url_for('login') }}">Login / Enroll</a>
                {% endif %}
            {% else %}
                <span></span>
                <a href="{{ url_for('logout') }}">Logout</a>
            {% endif %}
        </div>
    </header>

    <!-- Logout Modal (hidden by default, only shows when logged in) -->
    <div id="logoutModal" class="modal" style="display:none;">
        <div class="modal-content">
            <p>You are currently logged in.</p>
            <button onclick="logoutUser()">Logout</button>
            <button onclick="closeLogoutModal()">Cancel</button>
        </div>
    </div>

    <!-- Main Content Block -->
    <main>
        {% block content %}
        {% endblock %}
    </main>

    <!-- Footer -->
    <footer>
        <p>&copy; 2024 StemPro Academy. All rights reserved.</p>
        <ul class="footer-links">
            <li><a href="{{ url_for('privacy') }}">Privacy</a></li>
            <li><a href="{{ url_for('terms') }}">Terms of Use</a></li>
            <li><a href="{{ url_for('joinus') }}">Join Us</a></li>
            <li><a href="{{ url_for('resources') }}">Past Courses</a></li>
        </ul>
    </footer>

    <!-- Cookie Banner -->
    <div class="cookie-banner" id="cookieBanner">
        <p>We use cookies to give you the best online experience. By continuing to browse the site you are agreeing to our use of cookies.</p>
        <button onclick="acceptCookies()">I agree</button>
        <button onclick="rejectCookies()">Reject</button>
    </div>

<script>
    function toggleMenu() {
        const navMenu = document.querySelector('.nav-menu');
        navMenu.classList.toggle('active');
    }


    // // Show logout modal when the user is logged in
    // function showLogoutModal() {
    //     document.getElementById("logoutModal").style.display = "block";
    // }

    // // Close logout modal
    // function closeLogoutModal() {
    //     document.getElementById("logoutModal").style.display = "none";
    // }

    // // Logout user
    // function logoutUser() {
    //     window.location.href = "{{ url_for('logout') }}";
    // }

    // Set a cookie with an expiration period
    function setCookie(name, value, days) {
        const date = new Date();
        date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));
        document.cookie = `${name}=${value}; expires=${date.toUTCString()}; path=/`;
    }

    // Check if a specific cookie exists
    function getCookie(name) {
        const value = `; ${document.cookie}`;
        const parts = value.split(`; ${name}=`);
        if (parts.length === 2) return parts.pop().split(';').shift();
    }

    // Hide the cookie banner
    function hideCookieBanner() {
        const banner = document.getElementById("cookieBanner");
        if (banner) {
            banner.style.display = "none";
        }
    }

    // Accept cookies and set cookie value
    function acceptCookies() {
        setCookie("cookiesAccepted", "true", 30); // Set cookie for 30 days
        sessionStorage.setItem("cookieBannerShown", "true");
        hideCookieBanner();
    }

    // Reject cookies and set cookie value
    function rejectCookies() {
        setCookie("cookiesAccepted", "false", 30); // Set cookie for 30 days
        sessionStorage.setItem("cookieBannerShown", "true");
        hideCookieBanner();
    }

    // Show the cookie banner only if it hasn't been shown in the session
    window.onload = function() {
        const cookiesAccepted = getCookie("cookiesAccepted");
        const bannerShownInSession = sessionStorage.getItem("cookieBannerShown");

        if (!cookiesAccepted && !bannerShownInSession) {
            document.getElementById("cookieBanner").style.display = "flex";
        } else {
            hideCookieBanner();
        }
    };
</script>
</body>
</html>
